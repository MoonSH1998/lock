<!DOCTYPE html>
<html lang="en">
<head>
    <meta name=viewport content="width=device-width, initial-scale=1, user-scalable=0, viewport-fit=cover">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache">
<!--    <link rel="shortcut icon" href="images/main-logo.png">-->
    <link rel="stylesheet" type="text/css" href="/css/core.css" media="only screen">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <title>모두의 사물함</title>
</head>
<body>
<div class="container">
    <main class="flex-column justify-content-between">
        <div>
            <div class="back-icon" role="button" onclick="Page.back()"></div>
            <div class="signup-title fs-24" style="margin-top:58px">기본정보 입력하기</div>
            <div class="d-flex flex-column gap-2" style="margin-top:64px">
                <label class="fs-18" for="name">이름</label>
                <input class="fs-14" id="name" name="name" type="text" placeholder="이름 입력" style="padding:15px;border-radius:8px;border:1px solid #BFC2CE">
            </div>
            <div class="d-flex flex-column gap-2" style="margin-top:28px">
                <label class="fs-18" for="phone">전화번호</label>
                <div class="d-flex justify-content-between fs-14" id="phone">
                    <input name="numStart" style="width:30%;padding:10px 14px;height:max-content;border-radius:8px;border:1px solid #BFC2CE" type="number">
                    <input name="numMiddle" style="width:30%;padding:10px 14px;height:max-content;border-radius:8px;border:1px solid #BFC2CE" type="number">
                    <input name="numEnd" style="width:30%;padding:10px 14px;height:max-content;border-radius:8px;border:1px solid #BFC2CE" type="number">
                </div>
            </div>
            <div class="d-flex" style="margin-top:64px">
                <label class="fs-18 col-2 my-auto" for="department">학번</label>
                <input id="department" name="department" class="w-100 fs-14" type="text" placeholder="학번 입력하기" style="padding:15px;border-radius:8px;border:none;background-color:#F4F5FC">
            </div>
            <div class="d-flex justify-content-between" style="margin-top:56px">
                <label class="fs-18 col-2 my-auto" for="grade">학년</label>
                <select class="col-3 fs-14" id="grade" name="grade" style="padding:15px;border-radius:8px;border:1px solid #BFC2CE">
                    <option>1학년</option>
                    <option>2학년</option>
                    <option>3학년</option>
                    <option>4학년</option>
                </select>
            </div>
            <div class="d-flex justify-content-between" style="margin-top:54px">
                <label class="fs-18 col-2 my-auto" for="gender">성별</label>
                <div id="gender">
                    <span>
                        남성  <input type="radio" class="fs-14" name="gender" value="male">
                    </span>
                    <span style="margin-left:50px">
                        여성  <input type="radio" class="fs-14" name="gender" value="female">
                    </span>
                </div>
            </div>
            <div class="d-flex justify-content-between" style="margin-top:57px">
                <label class="fs-18 col-2" for="address">주소</label>
                <div id="address" class="d-flex flex-column gap-2">
                    <select id="시" name="시">
                        <option name="incheon">인천광역시</option>
                        <option name="daegu">대구광역시</option>
                        <option name="seoul">서울특별시</option>
                    </select>
                    <select id="구" name="구">
                        <option name="incheon">서구</option>
                        <option name="daegu">남구</option>
                        <option name="seoul">노원구</option>
                    </select>
                </div>
            </div>
            <div class="d-flex flex-column gap-3" style="margin-top:59px">
                <label class="fs-18 mt-2" for="pw">비밀번호</label>
                <input id="pw" name="pw" class="w-100 fs-14" type="password" placeholder="비밀번호 입력" style="padding:15px;border-radius:8px;border:none;background-color:#F4F5FC">
                <input id="pw2" name="pw2" class="w-100 fs-14" type="password" placeholder="비밀번호 확인" style="padding:15px;border-radius:8px;border:none;background-color:#F4F5FC">
            </div>
            <div class="d-flex justify-content-between align-items-center" style="padding-bottom:10px;border-bottom:1px solid #CBCDD8">
                <div class="d-flex gap-3" style="margin-top:68px">
                    <input style="width:20px" type="checkbox">
                    <span class="fs-20">전체동의</span>
                </div>
                <i class="fs-26 ri-arrow-down-s-fill d-flex align-self-end" style="color: #2857CE"></i>
            </div>
            <div class="d-flex justify-content-between align-items-center" style="margin-top:20px">
                <div class="d-flex gap-3">
                    <input style="width:16px" type="checkbox">
                    <span class="fs-12">모두의 사물함 서비스 이용약간 (필수)</span>
                </div>
                <div class="fs-26" style="color:#CBCDD8"><i class="ri-arrow-right-s-line"></i></div>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex gap-3">
                    <input style="width:16px" type="checkbox">
                    <span class="fs-12">개인정보 수집 및 이용약간 (필수) </span>
                </div>
                <div class="fs-26" style="color:#CBCDD8"><i class="ri-arrow-right-s-line"></i></div>
            </div>
        </div>
        <div role="button" class="fs-18 text-center submit-btn" style="margin-top:78px">완료</div>
        <div class="d-flex justify-content-center" style="gap:23px;margin-top:13px">
            <div style="color:#686B7C">이미 계정이 존재하신가요?</div>
            <a class="fs-14" href="/index.html">로그인</a>
        </div>
    </main>

</div>
</body>
</html>
<script src="js/jquery-3.5.1.min.js"></script>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap.bundle.js"></script>
<script src="js/core.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        Page.init(location.pathname, init, {nolog: true});
    });
</script>
<script src="js/velocity.min.js"></script>
<script type="text/javascript">
    var pagectx = {};
    function init(params) {
        pagectx = params;
    }

    $('.submit-btn').on('click',()=>{
        let name = $('input[name=name]').val().trim();
        let phone = $('input[name=numStart]').val().trim() + '-' + $('input[name=numMiddle]').val().trim() + '-' + $('input[name=numEnd]').val().trim();
        let department = $('input[name=department]').val().trim();
        let grade = $('select[name=grade]').val().trim();
        let gender;
        if($('input[name=gender]')[0].checked){
            gender = $('input[name=gender]')[0].value;
        }else{
            gender = $('input[name=gender]')[1].value;
        }
        //let addr = $('select[name=시]').val().trim() +' '+ $('select[name=구]').val().trim();
        let addr = 100000;
        let pw = $('input[name=pw]').val().trim();
        let obj = {'name' : name, 'phone' : phone, 'department' : department, 'grade' : grade, 'gender' : gender,'addr' : addr, 'pw' : pw, type: 'A'}
        console.log(obj);


        /*
        *   0. url로 접근핳수도 있으니 session값에서 이전 페이지에서 받아오는 uniName,email등 값 없을 시 이전 페이지 이동
        *   1.addr -> addr.js통해서 값 가져오기
        *   2.signupSchool -> signupSchool2넘어갈 때 sessionStroage통해서 uni, depName, email값 넘기기,
        *   3.obj실제 값과 다른 값들 학번이 Departmanet라고 되어있는거같은데 변수명 수정 signup.jsp보고 바꿔줘
        *   4.onclick()으로 함수로 만들기 jquery로 해놓은 위에 코드 함수로 만들어서 관리해줘
        * */

        AJAX.call("jsp/signup.jsp", obj, function(data) {
            console.log(data.trim());
            if(data.trim() == 'OK'){
                //OK -> 추가 완료
                Page.go('/sdSignupFinish.html')
            }else{
                //ER -> 에러 (reload하면 적은 값들 사라지니까 이거는 빼자 - 메세지만 출력)
                Dialog.alert(data.message,location.reload);
            }
        });


    });
</script>